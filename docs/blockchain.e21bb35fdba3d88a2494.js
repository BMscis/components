(self.webpackChunkespii_components=self.webpackChunkespii_components||[]).push([[33],{"./src/blockchain/blockchain.ts":(t,e,o)=>{"use strict";o("./node_modules/buffer/index.js"),new TextEncoder},"./src/blockchain/blockheader.ts":(t,e,o)=>{"use strict";var n=o("./node_modules/buffer/index.js"),s=function(t,e,o,n){return new(o||(o=Promise))((function(s,c){function r(t){try{h(n.next(t))}catch(t){c(t)}}function i(t){try{h(n.throw(t))}catch(t){c(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,i)}h((n=n.apply(t,e||[])).next())}))};const c=function(t){return t.reverse()},r=t=>{let e=t.toString(16),o=n.lW.from(e,"hex");return c(o).toString("hex")},i=function(t){return s(this,void 0,void 0,(function*(){console.log("params: ",t);let e=n.lW.from(t,"hex"),o=yield crypto.subtle.digest("SHA-256",e),s=yield crypto.subtle.digest("SHA-256",o),c=n.lW.from(s);return console.log("calculateHash: SHABUFFER ==",c.toString("hex")),c}))},h=function(t,e){switch(parseInt(e,16)<parseInt(t,16)){case!0:return!0;case!1:default:return!1}};new class{constructor(t,e,o,s,c,r){let i=n.lW.alloc(4);i[0]=t,this.version=i,this.previousHash=n.lW.from(e,"hex"),this.merkelRoot=n.lW.from(o,"hex"),this.tyme=n.lW.from(s,"hex"),this.target=n.lW.from(c,"hex"),this.nonce=n.lW.from(r,"hex")}hashBlockHeader(){let t=this.version.toString("hex")+this.previousHash.toString("hex")+this.merkelRoot.toString("hex")+this.tyme.toString("hex")+this.target.toString("hex")+this.nonce.toString("hex");console.log("Header2: ",t),i(t)}mine(){return s(this,void 0,void 0,(function*(){const t=this.target.toString("hex"),e=(t=>{const e=parseInt(t.slice(0,2),16);return(parseInt(t.slice(2),16)*Math.pow(2,8*(e-3))).toString(16)})(c(this.target).toString("hex"));let o=2436436149;for(;;){let n=r(o);console.log("NONCE: ",n," : ",o);let s=this.version.toString("hex")+this.previousHash.toString("hex")+this.merkelRoot.toString("hex")+this.tyme.toString("hex")+t+n;console.log("HEADER: ",s);let l=yield i(s);if(console.log("HASH: ",l.toString("hex")),h(e,c(l).toString("hex")))return console.log("SUCCESS"),"success";o++}}))}}(1,"9500c43a25c624520b5100adf82cb9f9da72fd2447a496bc600b000000000000","6cd862370395dedf1da2841ccda0fc489e3039de5f1ccddef0e834991a65600e","a6c8cb4d","b3936a1a","e3143991").mine()},"./src/blockchain/target.ts":()=>{},"./src/blockchain/consensus.js":()=>{},"./src/blockchain/p2p.js":(t,e,o)=>{"use strict";var n;!function(t){t[t.QUERY_LATEST=0]="QUERY_LATEST",t[t.QUERY_ALL=1]="QUERY_ALL",t[t.RESPONSE_BLOCKCHAIN=2]="RESPONSE_BLOCKCHAIN"}(n||(n={}))},"./src/blockchain/transaction.js":(t,e,o)=>{},"./src/blockchain/util.js":()=>{}},t=>{"use strict";var e=e=>t(t.s=e);t.O(0,[216],(()=>(e("./src/blockchain/blockchain.ts"),e("./src/blockchain/blockheader.ts"),e("./src/blockchain/consensus.js"),e("./src/blockchain/p2p.js"),e("./src/blockchain/target.ts"),e("./src/blockchain/transaction.js"),e("./src/blockchain/util.js")))),t.O()}]);